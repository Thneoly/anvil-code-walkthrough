"use strict";(self.webpackChunkanvil_code_walkthrough=self.webpackChunkanvil_code_walkthrough||[]).push([[8627],{4568:(r,e,n)=>{n.r(e),n.d(e,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"anvil/observability/errors-and-logging","title":"\u9519\u8bef\u5904\u7406\u4e0e\u65e5\u5fd7\uff08error.rs / logging.rs\uff09","description":"\u6982\u8ff0\uff1a\u7edf\u4e00\u68b3\u7406\u5404\u5c42\u9519\u8bef\u6620\u5c04\u4e0e\u65e5\u5fd7\u7b56\u7565\uff0c\u63d0\u4f9b\u6392\u9519\u5b9a\u4f4d\u5efa\u8bae\u3002","source":"@site/docs/anvil/observability/errors-and-logging.md","sourceDirName":"anvil/observability","slug":"/anvil/observability/errors-and-logging","permalink":"/anvil-code-walkthrough/docs/anvil/observability/errors-and-logging","draft":false,"unlisted":false,"editUrl":"https://github.com/Thneoly/anvil-code-walkthrough/edit/main/docs/anvil/observability/errors-and-logging.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"id":"errors-and-logging","title":"\u9519\u8bef\u5904\u7406\u4e0e\u65e5\u5fd7\uff08error.rs / logging.rs\uff09","sidebar_label":"\u9519\u8bef\u4e0e\u65e5\u5fd7","sidebar_position":1,"base_commit":"575bf62c","upstream_repo":"foundry-rs/foundry","upstream_path":"crates/anvil/src/"},"sidebar":"tutorialSidebar","previous":{"title":"\u53ef\u89c2\u6d4b\u6027","permalink":"/anvil-code-walkthrough/docs/category/\u53ef\u89c2\u6d4b\u6027"},"next":{"title":"\u6307\u6807\u4e0e\u8ffd\u8e2a","permalink":"/anvil-code-walkthrough/docs/anvil/observability/metrics-and-tracing"}}');var s=n(4848),l=n(8453);const o={id:"errors-and-logging",title:"\u9519\u8bef\u5904\u7406\u4e0e\u65e5\u5fd7\uff08error.rs / logging.rs\uff09",sidebar_label:"\u9519\u8bef\u4e0e\u65e5\u5fd7",sidebar_position:1,base_commit:"575bf62c",upstream_repo:"foundry-rs/foundry",upstream_path:"crates/anvil/src/"},t=void 0,a={},c=[];function d(r){const e={li:"li",mermaid:"mermaid",p:"p",ul:"ul",...(0,l.R)(),...r.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.p,{children:"\u6982\u8ff0\uff1a\u7edf\u4e00\u68b3\u7406\u5404\u5c42\u9519\u8bef\u6620\u5c04\u4e0e\u65e5\u5fd7\u7b56\u7565\uff0c\u63d0\u4f9b\u6392\u9519\u5b9a\u4f4d\u5efa\u8bae\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5feb\u901f\u94fe\u63a5\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6e90\u7801\uff08server/error.rs\uff09\uff1aref/foundry-575bf62c/crates/anvil/src/server/error.rs"}),"\n",(0,s.jsx)(e.li,{children:"\u6e90\u7801\uff08rpc/error.rs\uff09\uff1aref/foundry-575bf62c/crates/anvil/rpc/src/error.rs"}),"\n",(0,s.jsx)(e.li,{children:"\u6e90\u7801\uff08eth/error.rs\uff09\uff1aref/foundry-575bf62c/crates/anvil/src/eth/error.rs"}),"\n",(0,s.jsx)(e.li,{children:"\u6e90\u7801\uff08logging.rs\uff09\uff1aref/foundry-575bf62c/crates/anvil/src/logging.rs"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u9519\u8bef\u5206\u5c42\u4e0e\u6620\u5c04\uff1a"}),"\n",(0,s.jsx)(e.mermaid,{value:'flowchart TB\n  A["\u5185\u90e8\u9519\u8bef(Backend/Pool/EVM)"] --\x3e B["eth::error"]\n  B --\x3e C["rpc::error(JSON-RPC code/message)"]\n  C --\x3e D["server::error(HTTP/WS status)"]'}),"\n",(0,s.jsx)(e.p,{children:"\u5efa\u8bae\u5b9e\u8df5\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u660e\u786e\u53ef\u91cd\u8bd5\u4e0e\u4e0d\u53ef\u91cd\u8bd5\u9519\u8bef\uff08\u7f51\u7edc/\u4e0a\u6e38\u6682\u65f6\u4e0d\u53ef\u7528 vs \u53c2\u6570\u975e\u6cd5\uff09\u3002"}),"\n",(0,s.jsx)(e.li,{children:"JSON-RPC \u9519\u8bef\uff1a\u9009\u62e9\u6807\u51c6 code\uff08-32602 \u53c2\u6570\u3001-32603 \u5185\u90e8\u9519\u8bef\uff09\uff0c\u9644\u52a0 data \u63d0\u793a\u4e0a\u4e0b\u6587\u3002"}),"\n",(0,s.jsxs)(e.li,{children:["\u65e5\u5fd7\u5206\u7ea7\uff1a","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"error\uff1a\u4e0d\u53ef\u6062\u590d/\u5bfc\u81f4\u8bf7\u6c42\u5931\u8d25\uff1b"}),"\n",(0,s.jsx)(e.li,{children:"warn\uff1a\u6f5c\u5728\u95ee\u9898\uff08\u4e0a\u6e38\u6296\u52a8\u3001\u7f13\u5b58\u7f3a\u5931\u9ad8\u6bd4\u4f8b\uff09\uff1b"}),"\n",(0,s.jsx)(e.li,{children:"info\uff1a\u5173\u952e\u751f\u547d\u5468\u671f\u4e8b\u4ef6\uff08\u542f\u52a8\u3001\u5206\u53c9\u8fde\u63a5\u3001\u51fa\u5757\uff09\uff1b"}),"\n",(0,s.jsx)(e.li,{children:"debug\uff1a\u8def\u5f84\u5224\u5b9a\u3001\u5f00\u5173\u503c\u3001\u8ba1\u65f6\u70b9\uff1b"}),"\n",(0,s.jsx)(e.li,{children:"trace\uff1a\u8d85\u7ec6\u8282\uff08\u5efa\u8bae\u4ec5\u5728\u672c\u5730\u6216\u5b9a\u4f4d\u65f6\u542f\u7528\uff09\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"\u7ed3\u6784\u5316\u65e5\u5fd7\uff1a\u4f18\u5148 JSON \u683c\u5f0f\u5e76\u9644\u5e26 request_id\u3001method\u3001latency\u3001peer \u7b49\u5b57\u6bb5\uff0c\u4fbf\u4e8e\u68c0\u7d22\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5e38\u89c1\u9519\u8bef\u573a\u666f\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Fork \u4e0a\u6e38 429/\u8d85\u65f6\uff1a\u964d\u7ea7\u4e3a cache-only \u6216\u56de\u9000\u5230\u56fa\u5b9a\u9ad8\u5ea6\uff0c\u5fc5\u8981\u65f6\u77ed\u6682\u7194\u65ad\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u4ea4\u6613\u5165\u6c60\u5931\u8d25\uff1anonce \u8fc7\u65e7/\u4e0d\u8db3\u3001\u8d39\u7528\u4e0d\u8fbe\u6807\u3001\u7b7e\u540d/\u94fe ID \u4e0d\u5339\u914d\uff1b\u5c06\u8bca\u65ad\u4fe1\u606f\u5199\u5165 data\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u51fa\u5757\u5931\u8d25\uff1aEVM \u6267\u884c\u5f02\u5e38\uff08revert/out of gas\uff09\uff1b\u533a\u5206\u201c\u4ea4\u6613\u56de\u6267\u542b\u5931\u8d25\u201d\u4e0e\u201c\u533a\u5757\u4ea7\u51fa\u5931\u8d25\u201d\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u8c03\u8bd5\u5efa\u8bae\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4ee5\u8bf7\u6c42\u4e3a\u5355\u4f4d\u6253\u5370\u4e00\u6b21\u201c\u8d77\u6b62\u201ddebug \u65e5\u5fd7\uff0c\u5305\u542b method/params/hash/\u8017\u65f6\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u5bf9\u7f13\u5b58 miss \u8bb0\u5f55\u4e00\u6b21 warn \u5e76\u91c7\u6837\u6bd4\u4f8b\uff0c\u8861\u91cf\u56de\u6e90\u538b\u529b\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u5bf9\u957f\u5c3e\uff08>P99\uff09RPC \u65b9\u6cd5\u5f00\u542f\u6162\u8c03\u7528\u9608\u503c\u4e0a\u62a5\u3002"}),"\n"]})]})}function h(r={}){const{wrapper:e}={...(0,l.R)(),...r.components};return e?(0,s.jsx)(e,{...r,children:(0,s.jsx)(d,{...r})}):d(r)}},8453:(r,e,n)=>{n.d(e,{R:()=>o,x:()=>t});var i=n(6540);const s={},l=i.createContext(s);function o(r){const e=i.useContext(l);return i.useMemo(function(){return"function"==typeof r?r(e):{...e,...r}},[e,r])}function t(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(s):r.components||s:o(r.components),i.createElement(l.Provider,{value:e},r.children)}}}]);
"use strict";(self.webpackChunkanvil_code_walkthrough=self.webpackChunkanvil_code_walkthrough||[]).push([[7104],{2985:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"anvil/accounts/sign-and-accounts","title":"\u8d26\u6237\u4e0e\u7b7e\u540d\uff08sign.rs\uff09","description":"\u6982\u8ff0\uff1a\u7ba1\u7406\u672c\u5730\u8d26\u6237\u3001\u751f\u6210\u4e0e\u6821\u9a8c\u7b7e\u540d\u3001\u6062\u590d signer\uff0c\u670d\u52a1\u4ea4\u6613\u63d0\u4ea4\u4e0e API \u8c03\u7528\uff1b\u4e0e\u8d39\u7528/\u786c\u5206\u53c9\u89c4\u5219\u5171\u540c\u51b3\u5b9a\u4ea4\u6613\u6709\u6548\u6027\u3002","source":"@site/docs/anvil/accounts/sign-and-accounts.md","sourceDirName":"anvil/accounts","slug":"/anvil/accounts/sign-and-accounts","permalink":"/anvil-code-walkthrough/docs/anvil/accounts/sign-and-accounts","draft":false,"unlisted":false,"editUrl":"https://github.com/Thneoly/anvil-code-walkthrough/edit/main/docs/anvil/accounts/sign-and-accounts.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"id":"sign-and-accounts","title":"\u8d26\u6237\u4e0e\u7b7e\u540d\uff08sign.rs\uff09","sidebar_label":"\u8d26\u6237\u4e0e\u7b7e\u540d","sidebar_position":1,"base_commit":"575bf62c","upstream_repo":"foundry-rs/foundry","upstream_path":"crates/anvil/src/eth/sign.rs"},"sidebar":"tutorialSidebar","previous":{"title":"\u8d26\u6237\u4e0e\u7b7e\u540d","permalink":"/anvil-code-walkthrough/docs/category/\u8d26\u6237\u4e0e\u7b7e\u540d"},"next":{"title":"\u540e\u53f0\u4efb\u52a1","permalink":"/anvil-code-walkthrough/docs/category/\u540e\u53f0\u4efb\u52a1"}}');var r=s(4848),t=s(8453);const a={id:"sign-and-accounts",title:"\u8d26\u6237\u4e0e\u7b7e\u540d\uff08sign.rs\uff09",sidebar_label:"\u8d26\u6237\u4e0e\u7b7e\u540d",sidebar_position:1,base_commit:"575bf62c",upstream_repo:"foundry-rs/foundry",upstream_path:"crates/anvil/src/eth/sign.rs"},c=void 0,o={},l=[];function d(n){const e={li:"li",mermaid:"mermaid",p:"p",ul:"ul",...(0,t.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.p,{children:"\u6982\u8ff0\uff1a\u7ba1\u7406\u672c\u5730\u8d26\u6237\u3001\u751f\u6210\u4e0e\u6821\u9a8c\u7b7e\u540d\u3001\u6062\u590d signer\uff0c\u670d\u52a1\u4ea4\u6613\u63d0\u4ea4\u4e0e API \u8c03\u7528\uff1b\u4e0e\u8d39\u7528/\u786c\u5206\u53c9\u89c4\u5219\u5171\u540c\u51b3\u5b9a\u4ea4\u6613\u6709\u6548\u6027\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u5feb\u901f\u94fe\u63a5\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6e90\u7801\uff08sign.rs\uff09\uff1aref/foundry-575bf62c/crates/anvil/src/eth/sign.rs"}),"\n",(0,r.jsx)(e.li,{children:"\u6e90\u7801\uff08api.rs\uff09\uff1aref/foundry-575bf62c/crates/anvil/src/eth/api.rs"}),"\n",(0,r.jsx)(e.li,{children:"\u6e90\u7801\uff08fees.rs/miner.rs\uff09\uff1aref/foundry-575bf62c/crates/anvil/src/eth/fees.rs\uff0cref/foundry-575bf62c/crates/anvil/src/eth/miner.rs"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u804c\u8d23\u5206\u89e3\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u8d26\u6237\uff1a\u52a9\u8bb0\u8bcd/\u79c1\u94a5\u5bfc\u5165\u3001\u9884\u6ce8\u8d44\u3001\u89e3\u9501/\u9501\u5b9a\u3001\u5192\u5145\uff08impersonate\uff09\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u7b7e\u540d\uff1aEIP-155 \u94fe ID \u4fdd\u62a4\u3001EIP-2718/2930/1559/7702 \u53d8\u4f53\u89e3\u6790\u4e0e\u6062\u590d\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u6821\u9a8c\uff1anonce/\u94fe ID/\u7b7e\u540d\u66f2\u7ebf\u4e0e s \u503c\u8303\u56f4\uff08\u4f4e s\uff09\u68c0\u67e5\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u63d0\u4ea4\u6d41\u7a0b\uff08\u7b80\u5316\uff09\uff1a"}),"\n",(0,r.jsx)(e.mermaid,{value:'sequenceDiagram\n  participant C as "\u5ba2\u6237\u7aef"\n  participant API as "eth::api"\n  participant S as "eth::sign"\n  participant P as "txpool"\n  C->>API: eth_sendRawTransaction(rlp)\n  API->>S: \u89e3\u6790+\u9a8c\u7b7e+\u6062\u590d from\n  S--\x3e>API: (from, tx)\n  API->>P: \u5165\u6c60\u6821\u9a8c/\u6392\u5e8f\n  P--\x3e>API: ok(tx_hash)\n  API--\x3e>C: \u8fd4\u56de hash'}),"\n",(0,r.jsx)(e.p,{children:"\u5e38\u89c1\u9677\u9631\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"chain_id \u4e0d\u4e00\u81f4\u5bfc\u81f4\u9a8c\u7b7e\u5931\u8d25\uff1b\u786e\u4fdd CLI/Config \u4e0e\u4ea4\u6613\u6784\u9020\u4e00\u81f4\u3002"}),"\n",(0,r.jsx)(e.li,{children:"EIP-7702 \u6388\u6743\uff1a\u9700\u6b63\u786e\u5904\u7406\u6388\u6743\u8303\u56f4\u4e0e\u64a4\u9500\uff1b\u4e0e\u975e\u6388\u6743\u4ea4\u6613\u6392\u5e8f\u4ea4\u4e92\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u4f4e s \u4e0e v \u503c\uff1a\u4fdd\u6301\u517c\u5bb9\u6027\uff0c\u4f46\u5efa\u8bae\u6309 EIP-2/155 \u4f7f\u7528\u89c4\u8303\u8303\u56f4\u4ee5\u51cf\u5c11\u6b67\u4e49\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u6d4b\u8bd5\u5efa\u8bae\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6784\u9020\u591a\u79cd\u4ea4\u6613\u7c7b\u578b\uff081559/2930/7702\uff09\u7b7e\u540d\u5e76\u53d1\u9001\uff0c\u65ad\u8a00 from \u6062\u590d\u4e00\u81f4\u3001nonce \u9012\u589e\u4e0e\u6c60\u4e2d\u6392\u5e8f\u6b63\u786e\u3002"}),"\n"]})]})}function u(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>a,x:()=>c});var i=s(6540);const r={},t=i.createContext(r);function a(n){const e=i.useContext(t);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),i.createElement(t.Provider,{value:e},n.children)}}}]);
"use strict";(self.webpackChunkanvil_code_walkthrough=self.webpackChunkanvil_code_walkthrough||[]).push([[5675],{5864:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"anvil/observability/metrics-and-tracing","title":"\u6307\u6807\u4e0e\u8ffd\u8e2a\uff08\u5b9e\u8df5\u5efa\u8bae\uff09","description":"\u76ee\u6807\uff1a\u5728\u4e0d\u4fb5\u5165\u6838\u5fc3\u903b\u8f91\u7684\u524d\u63d0\u4e0b\uff0c\u83b7\u5f97\u53ef\u5b9a\u4f4d/\u53ef\u91cf\u5316\u7684\u8fd0\u884c\u7279\u6027\u3002","source":"@site/docs/anvil/observability/metrics-and-tracing.md","sourceDirName":"anvil/observability","slug":"/anvil/observability/metrics-and-tracing","permalink":"/anvil-code-walkthrough/docs/anvil/observability/metrics-and-tracing","draft":false,"unlisted":false,"editUrl":"https://github.com/Thneoly/anvil-code-walkthrough/edit/main/docs/anvil/observability/metrics-and-tracing.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"metrics-and-tracing","title":"\u6307\u6807\u4e0e\u8ffd\u8e2a\uff08\u5b9e\u8df5\u5efa\u8bae\uff09","sidebar_label":"\u6307\u6807\u4e0e\u8ffd\u8e2a","sidebar_position":2,"base_commit":"575bf62c","upstream_repo":"foundry-rs/foundry","upstream_path":"crates/anvil/"},"sidebar":"tutorialSidebar","previous":{"title":"\u9519\u8bef\u4e0e\u65e5\u5fd7","permalink":"/anvil-code-walkthrough/docs/anvil/observability/errors-and-logging"},"next":{"title":"\u5f00\u53d1\u6307\u5357","permalink":"/anvil-code-walkthrough/docs/category/\u5f00\u53d1\u6307\u5357"}}');var t=r(4848),s=r(8453);const l={id:"metrics-and-tracing",title:"\u6307\u6807\u4e0e\u8ffd\u8e2a\uff08\u5b9e\u8df5\u5efa\u8bae\uff09",sidebar_label:"\u6307\u6807\u4e0e\u8ffd\u8e2a",sidebar_position:2,base_commit:"575bf62c",upstream_repo:"foundry-rs/foundry",upstream_path:"crates/anvil/"},a=void 0,c={},o=[];function d(e){const n={code:"code",li:"li",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"\u76ee\u6807\uff1a\u5728\u4e0d\u4fb5\u5165\u6838\u5fc3\u903b\u8f91\u7684\u524d\u63d0\u4e0b\uff0c\u83b7\u5f97\u53ef\u5b9a\u4f4d/\u53ef\u91cf\u5316\u7684\u8fd0\u884c\u7279\u6027\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u7ed3\u6784\u5316\u65e5\u5fd7\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u5b57\u6bb5\u5efa\u8bae\uff1a",(0,t.jsx)(n.code,{children:"ts, level, method, path, req_id, peer, latency_ms, status, error_code"}),"\u3002"]}),"\n",(0,t.jsx)(n.li,{children:"\u5173\u952e\u70b9\u6253\u5370\uff1a\u8bf7\u6c42\u5165\u53e3/\u51fa\u53e3\uff08\u4e00\u6b21\uff09\uff0ccache miss\u3001\u91cd\u8bd5\u3001\u8d85\u65f6\u3001\u91cd\u7ec4\u7b49\u8f6c\u6298\u70b9\u3002"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u6307\u6807\u5efa\u8bae\uff08\u793a\u4f8b\u7ef4\u5ea6\uff09\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u8bf7\u6c42\uff1aQPS\u3001P95/P99 \u5ef6\u8fdf\u3001\u9519\u8bef\u6bd4\u7387\uff08\u6309 method \u5206\u7c7b\uff09\u3002"}),"\n",(0,t.jsx)(n.li,{children:"Fork \u56de\u6e90\uff1a\u8bf7\u6c42\u6570\u3001\u6210\u529f\u7387\u3001\u5e73\u5747\u65f6\u5ef6\u3001\u7f13\u5b58\u547d\u4e2d\u7387\u3002"}),"\n",(0,t.jsx)(n.li,{children:"\u8ba2\u9605\uff1a\u8fde\u63a5\u6570\u3001\u6d88\u606f\u901f\u7387\u3001\u4e22\u5f03/\u80cc\u538b\u6b21\u6570\u3002"}),"\n",(0,t.jsx)(n.li,{children:"\u6c60/\u51fa\u5757\uff1apending \u5927\u5c0f\u3001\u5165\u6c60\u5931\u8d25\u539f\u56e0\u5206\u5e03\u3001\u6bcf\u5757\u5305\u542b\u6570\u3002"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u8ffd\u8e2a\uff08\u53ef\u9009\uff09\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u4e3a\u957f\u94fe\u8def\u65b9\u6cd5\uff08\u5982\u56de\u6e90\u8bfb\u53d6/\u6267\u884c\uff09\u52a0 span\uff0c\u4e32\u8d77\u5b50\u6b65\u9aa4\uff08\u5165\u961f\u3001\u56de\u6e90\u3001\u6267\u884c\u3001\u6301\u4e45\u5316\uff09\u3002"}),"\n",(0,t.jsx)(n.li,{children:"\u6162\u8c03\u7528\u9608\u503c\u544a\u8b66\uff08\u5982 > P99 \u6216\u56fa\u5b9a ms\uff09\u3002"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u5feb\u901f\u94fe\u63a5\uff08\u6e90\u7801\uff09\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u65e5\u5fd7\u521d\u59cb\u5316\uff1aref/foundry-575bf62c/crates/anvil/src/logging.rs"}),"\n",(0,t.jsx)(n.li,{children:"\u9519\u8bef\u6620\u5c04\uff1aref/foundry-575bf62c/crates/anvil/rpc/src/error.rs"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>a});var i=r(6540);const t={},s=i.createContext(t);function l(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);
"use strict";(self.webpackChunkanvil_code_walkthrough=self.webpackChunkanvil_code_walkthrough||[]).push([[6611],{1294:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"anvil/advanced/bg-task-metrics","title":"\u4e13\u9898\u4e8c\uff1a\u540e\u53f0\u4efb\u52a1\uff08txpool \u6307\u6807\u5e7f\u64ad\uff09","description":"\u76ee\u6807\uff1a\u542f\u52a8\u4e00\u4e2a\u540e\u53f0\u4efb\u52a1\uff0c\u6bcf N \u79d2\u7edf\u8ba1 txpool pending/queued \u7b49\u6307\u6807\uff0c\u901a\u8fc7 pubsub \u5e7f\u64ad anvil_metrics\u3002","source":"@site/docs/anvil/advanced/bg-task-metrics.md","sourceDirName":"anvil/advanced","slug":"/anvil/advanced/bg-task-metrics","permalink":"/anvil-code-walkthrough/docs/anvil/advanced/bg-task-metrics","draft":false,"unlisted":false,"editUrl":"https://github.com/Thneoly/anvil-code-walkthrough/edit/main/docs/anvil/advanced/bg-task-metrics.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"\u4e13\u9898\u4e8c\uff1a\u540e\u53f0\u4efb\u52a1\uff08txpool \u6307\u6807\u5e7f\u64ad\uff09","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"\u4e13\u9898\u4e00\uff1a\u65b0\u589e RPC\uff08anvil_echo\uff09","permalink":"/anvil-code-walkthrough/docs/anvil/advanced/add-rpc"},"next":{"title":"\u4e13\u9898\u4e09\uff1aFork \u6269\u5c55\uff08cache-only \u4e0e Miss \u5904\u7406\uff09","permalink":"/anvil-code-walkthrough/docs/anvil/advanced/fork-cache-only"}}');var s=t(4848),a=t(8453);const r={title:"\u4e13\u9898\u4e8c\uff1a\u540e\u53f0\u4efb\u52a1\uff08txpool \u6307\u6807\u5e7f\u64ad\uff09",sidebar_position:2},c=void 0,o={},d=[];function l(e){const n={a:"a",code:"code",li:"li",mermaid:"mermaid",p:"p",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["\u76ee\u6807\uff1a\u542f\u52a8\u4e00\u4e2a\u540e\u53f0\u4efb\u52a1\uff0c\u6bcf N \u79d2\u7edf\u8ba1 txpool pending/queued \u7b49\u6307\u6807\uff0c\u901a\u8fc7 pubsub \u5e7f\u64ad ",(0,s.jsx)(n.code,{children:"anvil_metrics"}),"\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u5b9e\u65bd\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u542f\u505c\uff1a\u5728 ",(0,s.jsx)(n.code,{children:"service"})," \u88c5\u914d\u65f6\u521b\u5efa\u4efb\u52a1 handle\uff0cshutdown \u8def\u5f84\u4f18\u96c5\u9000\u51fa\uff1b"]}),"\n",(0,s.jsxs)(n.li,{children:["\u901a\u9053\uff1a\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"broadcast"})," \u5411\u8ba2\u9605\u8005\u63a8\u9001 JSON \u6307\u6807\uff1b"]}),"\n",(0,s.jsx)(n.li,{children:"\u6307\u6807\uff1apending/queued \u6570\u91cf\u3001\u66ff\u6362\u6b21\u6570\u3001\u9a71\u9010\u8ba1\u6570\u3001\u5e73\u5747\u7b49\u5f85\u65f6\u957f\u7b49\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Mermaid\uff08\u6d41\u7a0b\uff09\uff1a"}),"\n",(0,s.jsx)(n.mermaid,{value:'flowchart LR\n  T["\u4efb\u52a1: metrics_tick"] --\x3e P["\u8bfb\u53d6 txpool \u5c3a\u5bf8"]\n  P --\x3e PUB["pubsub \u63a8\u9001 anvil_metrics"]\n  PUB --\x3e WS["WS \u5ba2\u6237\u7aef"]'}),"\n",(0,s.jsx)(n.p,{children:"\u5ef6\u4f38\u9605\u8bfb\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"../dev-guide/add-background-task",children:"\u5f00\u53d1\u6307\u5317 \xb7 \u540e\u53f0\u4efb\u52a1"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"../tasks/block-listener",children:"\u4efb\u52a1 \xb7 \u533a\u5757\u76d1\u542c"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"../observability/metrics-and-tracing",children:"\u53ef\u89c2\u6d4b\u6027 \xb7 \u6307\u6807\u4e0e\u8ffd\u8e2a"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>c});var i=t(6540);const s={},a=i.createContext(s);function r(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);
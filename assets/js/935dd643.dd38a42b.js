"use strict";(self.webpackChunkanvil_code_walkthrough=self.webpackChunkanvil_code_walkthrough||[]).push([[9665],{8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>a});var s=n(6540);const r={},i=s.createContext(r);function o(e){const t=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:t},e.children)}},9630:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"anvil/dev-guide/testing-patterns","title":"\u6d4b\u8bd5\u7f16\u5199\u6a21\u5f0f\uff08snapshot/revert/\u5b9a\u5e8f\uff09","description":"\u5efa\u8bae\u6a21\u5f0f\uff1a","source":"@site/docs/anvil/dev-guide/testing-patterns.md","sourceDirName":"anvil/dev-guide","slug":"/anvil/dev-guide/testing-patterns","permalink":"/anvil-code-walkthrough/docs/anvil/dev-guide/testing-patterns","draft":false,"unlisted":false,"editUrl":"https://github.com/Thneoly/anvil-code-walkthrough/edit/main/docs/anvil/dev-guide/testing-patterns.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"testing-patterns","title":"\u6d4b\u8bd5\u7f16\u5199\u6a21\u5f0f\uff08snapshot/revert/\u5b9a\u5e8f\uff09","sidebar_label":"\u6d4b\u8bd5\u7f16\u5199\u6a21\u5f0f","sidebar_position":4,"base_commit":"575bf62c","upstream_repo":"foundry-rs/foundry","upstream_path":"crates/anvil/tests/it/"},"sidebar":"tutorialSidebar","previous":{"title":"RPC \u52a0\u56fa","permalink":"/anvil-code-walkthrough/docs/anvil/dev-guide/rpc-hardening"},"next":{"title":"\u5b9e\u6218\u4e0e\u6269\u5c55","permalink":"/anvil-code-walkthrough/docs/category/\u5b9e\u6218\u4e0e\u6269\u5c55"}}');var r=n(4848),i=n(8453);const o={id:"testing-patterns",title:"\u6d4b\u8bd5\u7f16\u5199\u6a21\u5f0f\uff08snapshot/revert/\u5b9a\u5e8f\uff09",sidebar_label:"\u6d4b\u8bd5\u7f16\u5199\u6a21\u5f0f",sidebar_position:4,base_commit:"575bf62c",upstream_repo:"foundry-rs/foundry",upstream_path:"crates/anvil/tests/it/"},a=void 0,c={},l=[];function d(e){const t={code:"code",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"\u5efa\u8bae\u6a21\u5f0f\uff1a"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["\u56fa\u5b9a\u5206\u53c9\u9ad8\u5ea6\uff1a",(0,r.jsx)(t.code,{children:"--fork-block-number"}),"\uff0c\u7a33\u5b9a\u5916\u90e8\u4f9d\u8d56\u3002"]}),"\n",(0,r.jsxs)(t.li,{children:["\u663e\u5f0f\u65f6\u95f4\u4e0e\u51fa\u5757\uff1a\u7981\u7528\u81ea\u52a8\u6316\u77ff\uff0c\u4f7f\u7528 ",(0,r.jsx)(t.code,{children:"evm_mine"})," \u4e0e ",(0,r.jsx)(t.code,{children:"anvil_setNextBlockTimestamp"}),"\u3002"]}),"\n",(0,r.jsxs)(t.li,{children:["\u5feb\u7167\u4e0e\u56de\u6eda\uff1a",(0,r.jsx)(t.code,{children:"evm_snapshot"})," / ",(0,r.jsx)(t.code,{children:"evm_revert"})," \u5feb\u901f\u590d\u539f\u72b6\u6001\u3002"]}),"\n",(0,r.jsx)(t.li,{children:"\u7a33\u5b9a\u5b9a\u5e8f\uff1a\u540c\u4ef7\u4ea4\u6613\u7528\u5ef6\u8fdf/nonce \u63a7\u5236\u987a\u5e8f\uff0c\u51cf\u5c11\u5e76\u53d1\u968f\u673a\u6027\u3002"}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"\u53c2\u8003\u6d4b\u8bd5\uff1a"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"\u5206\u53c9\uff1aref/foundry-575bf62c/crates/anvil/tests/it/fork.rs"}),"\n",(0,r.jsx)(t.li,{children:"\u4ea4\u6613/\u6c60\uff1aref/foundry-575bf62c/crates/anvil/tests/it/transaction.rs\u3001ref/foundry-575bf62c/crates/anvil/tests/it/txpool.rs"}),"\n",(0,r.jsx)(t.li,{children:"\u51fa\u5757/\u8d39\u7528\uff1aref/foundry-575bf62c/crates/anvil/src/eth/miner.rs\u3001ref/foundry-575bf62c/crates/anvil/tests/it/gas.rs"}),"\n",(0,r.jsx)(t.li,{children:"\u65e5\u5fd7/\u8ba2\u9605\uff1aref/foundry-575bf62c/crates/anvil/tests/it/logs.rs\u3001ref/foundry-575bf62c/crates/anvil/tests/it/pubsub.rs"}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);
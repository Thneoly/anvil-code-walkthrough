"use strict";(self.webpackChunkanvil_code_walkthrough=self.webpackChunkanvil_code_walkthrough||[]).push([[8938],{7158:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"anvil/txpool/limits-and-eviction","title":"\u5bb9\u91cf\u9650\u5236\u4e0e\u9010\u51fa\u7b56\u7565\uff08limits & eviction\uff09","description":"\u4ea4\u6613\u6c60\u7ef4\u62a4\u603b\u4f53\u4e0e\u6309\u8d26\u6237\u7684\u5bb9\u91cf\u9650\u5236\uff0c\u5e76\u5728\u8d44\u6e90\u7d27\u5f20\u65f6\u6267\u884c\u9010\u51fa\u7b56\u7565\uff0c\u4f18\u5148\u4fdd\u7559\u201c\u66f4\u6709\u4ef7\u503c\u201d\u7684\u5019\u9009\u4ea4\u6613\u3002","source":"@site/docs/anvil/txpool/limits-and-eviction.md","sourceDirName":"anvil/txpool","slug":"/anvil/txpool/limits-and-eviction","permalink":"/anvil-code-walkthrough/docs/anvil/txpool/limits-and-eviction","draft":false,"unlisted":false,"editUrl":"https://github.com/Thneoly/anvil-code-walkthrough/edit/main/docs/anvil/txpool/limits-and-eviction.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"\u5bb9\u91cf\u9650\u5236\u4e0e\u9010\u51fa\u7b56\u7565\uff08limits & eviction\uff09","sidebar_position":3,"base_commit":"575bf62c","upstream_repo":"foundry-rs/foundry","upstream_path":"crates/anvil/src/eth/pool/"},"sidebar":"tutorialSidebar","previous":{"title":"Pending \u4e0e Queued \u4ee5\u53ca\u63d0\u5347\u673a\u5236","permalink":"/anvil-code-walkthrough/docs/anvil/txpool/pending-and-promotion"},"next":{"title":"\u77ff\u5de5/\u51fa\u5757","permalink":"/anvil-code-walkthrough/docs/anvil/txpool/miner"}}');var r=i(4848),l=i(8453);const o={title:"\u5bb9\u91cf\u9650\u5236\u4e0e\u9010\u51fa\u7b56\u7565\uff08limits & eviction\uff09",sidebar_position:3,base_commit:"575bf62c",upstream_repo:"foundry-rs/foundry",upstream_path:"crates/anvil/src/eth/pool/"},s=void 0,c={},d=[{value:"\u4e3b\u8981\u9650\u5236\u7ef4\u5ea6",id:"\u4e3b\u8981\u9650\u5236\u7ef4\u5ea6",level:2},{value:"\u9010\u51fa\u7b56\u7565\uff08\u6982\u5ff5\uff09",id:"\u9010\u51fa\u7b56\u7565\u6982\u5ff5",level:2},{value:"\u4e0e\u51fa\u5757/\u91cd\u7ec4\u7684\u76f8\u4e92\u5f71\u54cd",id:"\u4e0e\u51fa\u5757\u91cd\u7ec4\u7684\u76f8\u4e92\u5f71\u54cd",level:2},{value:"\u914d\u7f6e\u9879",id:"\u914d\u7f6e\u9879",level:2},{value:"\u8c03\u8bd5\u5efa\u8bae",id:"\u8c03\u8bd5\u5efa\u8bae",level:2}];function a(n){const e={a:"a",code:"code",h2:"h2",li:"li",mermaid:"mermaid",p:"p",ul:"ul",...(0,l.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.p,{children:"\u4ea4\u6613\u6c60\u7ef4\u62a4\u603b\u4f53\u4e0e\u6309\u8d26\u6237\u7684\u5bb9\u91cf\u9650\u5236\uff0c\u5e76\u5728\u8d44\u6e90\u7d27\u5f20\u65f6\u6267\u884c\u9010\u51fa\u7b56\u7565\uff0c\u4f18\u5148\u4fdd\u7559\u201c\u66f4\u6709\u4ef7\u503c\u201d\u7684\u5019\u9009\u4ea4\u6613\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u5feb\u901f\u94fe\u63a5\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u6e90\u7801\uff08pool/mod.rs\uff09\uff1a",(0,r.jsx)(e.a,{href:"https://github.com/foundry-rs/foundry/blob/575bf62c/crates/anvil/src/eth/pool/mod.rs",children:"https://github.com/foundry-rs/foundry/blob/575bf62c/crates/anvil/src/eth/pool/mod.rs"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u6e90\u7801\uff08pool/transactions.rs\uff09\uff1a",(0,r.jsx)(e.a,{href:"https://github.com/foundry-rs/foundry/blob/575bf62c/crates/anvil/src/eth/pool/transactions.rs",children:"https://github.com/foundry-rs/foundry/blob/575bf62c/crates/anvil/src/eth/pool/transactions.rs"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u76f8\u5173\uff08miner.rs\uff09\uff1a",(0,r.jsx)(e.a,{href:"https://github.com/foundry-rs/foundry/blob/575bf62c/crates/anvil/src/eth/miner.rs",children:"https://github.com/foundry-rs/foundry/blob/575bf62c/crates/anvil/src/eth/miner.rs"})]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u4e3b\u8981\u9650\u5236\u7ef4\u5ea6",children:"\u4e3b\u8981\u9650\u5236\u7ef4\u5ea6"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5168\u5c40\u5bb9\u91cf\uff1a\u6c60\u5185\u603b\u4ea4\u6613\u6570\u91cf\u4e0a\u9650\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u6bcf\u8d26\u6237\u4e0a\u9650\uff1a\u9632\u6b62\u5355\u4e2a\u8d26\u6237\u901a\u8fc7\u957f\u94fe\u8def\u7684 queued/pending \u5360\u6ee1\u8d44\u6e90\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u5355\u7b14\u7ea6\u675f\uff1a\u539f\u59cb\u5b57\u8282\u5927\u5c0f\u3001\u8bbf\u95ee\u5217\u8868/\u6570\u636e\u957f\u5ea6\u4e0a\u9650\u3001blob \u76f8\u5173\u5b57\u6bb5\u9650\u5236\uff08\u5206\u53c9\u76f8\u5173\uff09\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u9010\u51fa\u7b56\u7565\u6982\u5ff5",children:"\u9010\u51fa\u7b56\u7565\uff08\u6982\u5ff5\uff09"}),"\n",(0,r.jsx)(e.mermaid,{value:"flowchart LR\n    CAP[\u5bb9\u91cf\u5df2\u6ee1?] --\x3e|\u662f| PICK[\u6311\u9009\u4f4e\u4ef7\u503c\u5019\u9009]\n    PICK --\x3e EVICT[\u9010\u51fa]\n    EVICT --\x3e OK[\u91ca\u653e\u7a7a\u95f4]\n    CAP --\x3e|\u5426| OK"}),"\n",(0,r.jsx)(e.p,{children:"\u6311\u9009\u89c4\u5219\uff08\u5e38\u89c1\uff09\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4f18\u5148\u9010\u51fa effectiveTip \u8f83\u4f4e\u7684\u4ea4\u6613\uff1b"}),"\n",(0,r.jsx)(e.li,{children:"\u8fc7\u4e45\u672a\u63d0\u5347/\u65e0\u671b\u6267\u884c\u7684 queued \u957f\u94fe\uff1b"}),"\n",(0,r.jsx)(e.li,{children:"\u540c\u8d26\u6237\u5185\u53ef\u66ff\u4ee3\u6027\u9ad8\u7684\u65e7\u7248\u672c\uff08\u82e5\u5df2\u88ab\u66f4\u9ad8\u51fa\u4ef7\u8986\u76d6\uff09\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u9010\u51fa\u5fc5\u987b\u4fdd\u8bc1\u57fa\u672c\u4e0d\u53d8\u91cf\uff0c\u4f8b\u5982\u4e0d\u80fd\u7834\u574f\u8d26\u6237\u5185 pending \u7684\u8fde\u7eed\u6027\uff0c\u907f\u514d\u5bfc\u81f4\u77ff\u5de5\u65e0\u6cd5\u6253\u5305\u3002"}),"\n",(0,r.jsx)(e.h2,{id:"\u4e0e\u51fa\u5757\u91cd\u7ec4\u7684\u76f8\u4e92\u5f71\u54cd",children:"\u4e0e\u51fa\u5757/\u91cd\u7ec4\u7684\u76f8\u4e92\u5f71\u54cd"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u51fa\u5757\u540e\uff1a\u79fb\u9664\u5df2\u4e0a\u94fe\u4ea4\u6613\uff0c\u91ca\u653e\u7a7a\u95f4\uff1b\u89e6\u53d1 queued -> pending \u7684\u63a8\u8fdb\u3002"}),"\n",(0,r.jsx)(e.li,{children:"Reorg\uff1a\u5c06\u88ab\u56de\u6eda\u7684\u4ea4\u6613\u653e\u56de\u6c60\u4e2d\u5e76\u91cd\u6392\uff1b\u5fc5\u8981\u65f6\u5bf9\u5931\u6548\u4ea4\u6613\u8fdb\u884c\u518d\u9a8c\u8bc1\uff08\u4f59\u989d/\u8d39\u7528\uff09\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u914d\u7f6e\u9879",children:"\u914d\u7f6e\u9879"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u5168\u5c40/\u6bcf\u8d26\u6237\u4e0a\u9650\uff1a\u901a\u5e38\u7531\u8fd0\u884c\u53c2\u6570\u6216\u9ed8\u8ba4\u5e38\u91cf\u51b3\u5b9a\uff08\u53c2\u8003 ",(0,r.jsx)(e.code,{children:"opts.rs"}),"/",(0,r.jsx)(e.code,{children:"config.rs"}),"\uff09\u3002"]}),"\n",(0,r.jsx)(e.li,{children:"\u66ff\u6362\u9608\u503c\uff1a\u5f71\u54cd RBF \u7684\u654f\u611f\u5ea6\uff1b\u9608\u503c\u8fc7\u4f4e\u5e26\u6765\u6296\u52a8\uff0c\u8fc7\u9ad8\u5bfc\u81f4\u7528\u6237\u96be\u4ee5\u66ff\u6362\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u8c03\u8bd5\u5efa\u8bae",children:"\u8c03\u8bd5\u5efa\u8bae"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6784\u9020\u5de8\u5927 queued \u94fe\u5e76\u9010\u6b65\u8865\u9f50 nonce\uff0c\u89c2\u5bdf\u9010\u51fa/\u63a8\u8fdb\u884c\u4e3a\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u5bf9\u540c nonce \u8fde\u7eed\u53d1\u9001\u4e0d\u540c tip \u7684\u4ea4\u6613\uff0c\u9a8c\u8bc1\u66ff\u6362\u9608\u503c\u89e6\u53d1\u70b9\u4e0e\u4e8b\u4ef6\u901a\u77e5\u3002"}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>o,x:()=>s});var t=i(6540);const r={},l=t.createContext(r);function o(n){const e=t.useContext(l);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:o(n.components),t.createElement(l.Provider,{value:e},n.children)}}}]);